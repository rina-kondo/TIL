## Chapter3 コードでの契約
### 他のエンジニアはどのように私たちのコードにかかわるのか
- チーム内で書いたコードは依存し合う (要件の変更によりお互い壊れる原因になりうる)

#### お前がコードを書くときに考慮するべき3項目
- あなたにとっては明確なことでも、他の人にとっては明確ではない
- 他のエンジニアは不注意であなたのコードを壊す
- あなたはやがて、あなたのコードを忘れる

#### コードの使い方の理解
<コードの使い方の情報>.  
- あなたが作った関数はどのシナリオで呼び出すべきか？
- あなたが作ったクラスは何を表していていつ使われるか
- どんな値を使って呼ぶべきか
- 動作は？返り値のパターンは？
    
<↑を推察する方法>.  
- 名前やデータ型に注目する ◎
- ドキュメントや関数やクラス単位のコメントを読む ○  (これは読み手が読んでくれるかどうか、正しく読み取ってくれるかで情報の信頼性が左右される)
- 作った本人に聞く△  (忘れるし、時間はかかるし、その人が常に永遠に聞ける場所にいるとは限らない)
- コードを読む△  (依存先のコードを読むことになるが、これは非現実的だ)

### コードでの契約とその中の細則
<コード契約の条件のカテゴリー>.  
- **事前条件:** システムのあるべき状態や、コードを呼び出す前に真であるべきこと。
- **事後条件:** システムの新しい状態や、返されるべき特定の値など、コードを呼び出した後に真であるべきこと。
- **普遍条件:** コード呼び出し前後で変わるべきでないもの
    
<契約の中の細則>.  
**契約の明確な部分.**  
- 関数とクラスの名前
- パラメータの型
- 戻り値の型
    
**契約の不明瞭な部分.**  
- コメントとドキュメント
- 非検査例外

### 細かいコメントを最小限にすることのメリット
減らす方法:   
目標としてコードが誤用された場合はコンパイルエラーを起こすようにする.  
=> 状態(state)と可変性(mutability)を排除する

### 細かいコメントを避けられない場合、チェックとアサーションをどのように活用できるのか
#### 検査
コードでの契約が遵守されているか確認する追加のロジックのこと。
コード実行後の戻り値が正しいか、チエックする事後条件の検査もある（例外処理？）
- ファズテスト: バグや設定ミスを引き起こす可能性がある値を生成するテスト。例外がちゃんとスローされるかチェックする

#### アサーション
- アサーションはある条件をチェックし、条件が偽になったときにAssertionError例外を発生させる構文です。
- ビルドするときにコンパイル対象外として扱える  
　=> パフォーマンス向上・コードが中断する可能性を減らす
